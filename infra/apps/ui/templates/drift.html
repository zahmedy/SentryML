{% extends "base.html" %}
{% block content %}

<div class="section-header">
  <h2 class="section-title">Drift</h2>
  <div class="section-sub"><a href="/">Back to dashboard</a></div>
</div>

<div class="table-wrap">
<table width="100%">
  <thead>
    <tr>
      <th>Model</th>
      <th>Monitor</th>
      <th>Metric</th>
      <th>Value</th>
      <th>Warn</th>
      <th>Critical</th>
      <th>Status</th>
      <th>Window</th>
      <th>Calculated</th>
    </tr>
  </thead>
  <tbody>
    {% for d in drift %}
    <tr>
      <td>{{ d.model_id }}</td>
      <td>{{ d.monitor_id }}</td>
      <td>{{ d.metric }}</td>
      <td>{{ d.value|fmt_num }}</td>
      <td>{{ d.warn_threshold }}</td>
      <td>{{ d.critical_threshold }}</td>
      <td>
        {% if d.status == "ok" %}
          <span class="badge badge-ok">ok</span>
        {% elif d.status == "warn" %}
          <span class="badge badge-warn">warn</span>
        {% elif d.status == "critical" %}
          <span class="badge badge-critical">critical</span>
        {% else %}
          <span class="badge badge-neutral">{{ d.status }}</span>
        {% endif %}
      </td>
      <td>
        {{ d.baseline_start|fmt_dt }} â†’ {{ d.current_end|fmt_dt }}
      </td>
      <td>{{ d.created_at|fmt_dt }}</td>
    </tr>
    {% else %}
    <tr>
      <td colspan="9">No drift calculated yet</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>

{% endblock %}
